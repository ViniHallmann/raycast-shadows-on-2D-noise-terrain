<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noise island with WebGL</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <canvas id="gl-canvas"></canvas>

  <button id="controls-toggle" class="controls-toggle" aria-label="Toggle Controls">
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
      <path d="M2 4h12M2 8h12M2 12h12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
    </svg>
  </button>

  <div id="controls" class="controls-panel">
    <div class="controls-header">
      <div class="header-left">
         <svg width="16" height="16" viewBox="0 0 16 16" fill="none" class="settings-icon">
          <path d="M2 4h12M2 8h12M2 12h12" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        <span>Controles de variáveis</span>
      </div>
      <div class="header-right">
        <button id="controls-close" class="controls-close" aria-label="Close Controls">
          <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
            <path d="M9 3L3 9M3 3l6 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
        </button>
      </div>
    </div>

    <div class="controls-content">
      
      <div class="control-section">
        <h4>Geral</h4>
        <div class="control-group">
          <label for="octaves">Octaves</label>
          <input type="range" id="octaves" min="1" max="10" value="4" step="1">
          <span id="octaves-value">4</span>
        </div>
        <div class="control-group">
          <label for="scale">Scale</label>
          <input type="range" id="scale" min="0.1" max="5.0" value="1.6" step="0.1">
          <span id="scale-value">1.6</span>
        </div>
        <div class="control-group">
          <label for="persistence">Persistence</label>
          <input type="range" id="persistence" min="0.1" max="1.0" value="0.5" step="0.05">
          <span id="persistence-value">0.50</span>
        </div>
        <div class="control-group">
          <label for="lacunarity">Lacunarity</label>
          <input type="range" id="lacunarity" min="1.0" max="4.0" value="2.0" step="0.1">
          <span id="lacunarity-value">2.0</span>
        </div>
        <div class="control-group">
          <label for="noise-zoom">Noise Zoom</label>
          <input type="range" id="noise-zoom" min="1.0" max="10.0" value="5.0" step="0.1">
          <span id="noise-zoom-value">5.0</span>
        </div>
        <div class="control-group"> 
          <label for="gradient-curve">Gradient Curve</label>
          <input type="range" id="gradient-curve" min="0.1" max="3.0" value="0.8" step="0.1">
          <span id="gradient-curve-value">0.8</span>
        </div>
      </div>

      <div class="control-section">
        <h4>Pincel</h4>
        <div class="control-group">
          <label for="brush-size">Brush Size</label>
          <input type="range" id="brush-size" min="1" max="100" value="50" step="1">
          <span id="brush-size-value">50</span>
        </div>
        <div class="control-group">
          <label for="brush-intensity">Brush Intensity</label>
          <input type="range" id="brush-intensity" min="0.001" max="0.05" value="0.005" step="0.001">
          <span id="brush-intensity-value">0.005</span>
        </div>
      </div>

      <div class="control-section">
        <h4>Níveis do Terreno</h4>
        <div class="control-group">
          <label for="water-level">Water Level</label>
          <input type="range" id="water-level" min="0.0" max="1.0" value="0.1" step="0.01">
          <span id="water-level-value">0.10</span>
        </div>
        <div class="control-group">
          <label for="sand-level">Sand Level</label>
          <input type="range" id="sand-level" min="0.0" max="1.0" value="0.18" step="0.01">
          <span id="sand-level-value">0.18</span>
        </div>
        <div class="control-group">
          <label for="grass-level">Grass Level</label>
          <input type="range" id="grass-level" min="0.0" max="1.0" value="0.45" step="0.01">
          <span id="grass-level-value">0.45</span>
        </div>
        <div class="control-group">
          <label for="forest-level">Forest Level</label>
          <input type="range" id="forest-level" min="0.0" max="1.0" value="0.6" step="0.01">
          <span id="forest-level-value">0.60</span>
        </div>
        <div class="control-group">
          <label for="rock-level">Rock Level</label>
          <input type="range" id="rock-level" min="0.0" max="1.0" value="0.7" step="0.01">
          <span id="rock-level-value">0.70</span>
        </div>
        <div class="control-group">
          <label for="snow-level">Snow Level</label>
          <input type="range" id="snow-level" min="0.0" max="1.0" value="0.9" step="0.01">
          <span id="snow-level-value">0.90</span>
        </div>
        <div class="control-group">
          <label for="slope-start">Slope Start</label>
          <input type="range" id="slope-start" min="0.0" max="1.0" value="0.85" step="0.01">
          <span id="slope-start-value">0.85</span>
        </div>
      </div>

      <div class="control-section">
        <h4>Terreno</h4>
        <div class="control-group">
          <label for="terrain-variation">Terrain Variation</label>
          <input type="range" id="terrain-variation" min="0.0" max="0.1" value="0.015" step="0.001">
          <span id="terrain-variation-value">0.015</span>
        </div>
         <div class="control-group">
          <label for="biome-freq1">Biome Freq. 1</label>
          <input type="range" id="biome-freq1" min="1" max="200" value="50" step="1">
          <span id="biome-freq1-value">50</span>
        </div>
        <div class="control-group">
          <label for="biome-freq2">Biome Freq. 2</label>
          <input type="range" id="biome-freq2" min="1" max="200" value="150" step="1">
          <span id="biome-freq2-value">150</span>
        </div>
      </div>

      <div class="control-section">
        <h4>Sombras</h4>
        <div class="control-group">
          <label for="shadow-intensity">Shadow Intensity</label>
          <input type="range" id="shadow-intensity" min="0.0" max="2.0" value="0.5" step="0.05">
          <span id="shadow-intensity-value">0.50</span>
        </div>
        <div class="control-group">
          <label for="shadow-steps">Shadow Steps</label>
          <input type="range" id="shadow-steps" min="10" max="500" value="225" step="10">
          <span id="shadow-steps-value">225</span>
        </div>
        <div class="control-group">
          <label for="shadow-step-size">Shadow Step Size</label>
          <input type="range" id="shadow-step-size" min="0.001" max="0.05" value="0.01" step="0.001">
          <span id="shadow-step-size-value">0.010</span>
        </div>
        <div class="control-group">
          <label for="shadow-penumbra">Shadow Penumbra</label>
          <input type="range" id="shadow-penumbra" min="0.0" max="0.1" value="0.02" step="0.001">
          <span id="shadow-penumbra-value">0.020</span>
        </div>
        <div class="control-group">
          <label for="shadow-color-r">Shadow Color R</label>
          <input type="range" id="shadow-color-r" min="0.0" max="1.0" value="0.35" step="0.01">
          <span id="shadow-color-r-value">0.35</span>
        </div>
        <div class="control-group">
          <label for="shadow-color-g">Shadow Color G</label>
          <input type="range" id="shadow-color-g" min="0.0" max="1.0" value="0.35" step="0.01">
          <span id="shadow-color-g-value">0.35</span>
        </div>
        <div class="control-group">
          <label for="shadow-color-b">Shadow Color B</label>
          <input type="range" id="shadow-color-b" min="0.0" max="1.0" value="0.45" step="0.01">
          <span id="shadow-color-b-value">0.45</span>
        </div>
      </div>

      <div class="control-section">
        <h4>Água</h4>
         <div class="control-group">
          <label for="wave-amplitude">Wave Amplitude</label>
          <input type="range" id="wave-amplitude" min="0.0" max="0.01" value="0.002" step="0.0001">
          <span id="wave-amplitude-value">0.0020</span>
        </div>
        <div class="control-group">
          <label for="wave-frequency">Wave Frequency</label>
          <input type="range" id="wave-frequency" min="1.0" max="20.0" value="8.0" step="0.5">
          <span id="wave-frequency-value">8.0</span>
        </div>
        <div class="control-group">
          <label for="wave-speed">Wave Speed</label>
          <input type="range" id="wave-speed" min="0.0" max="0.1" value="0.01" step="0.001">
          <span id="wave-speed-value">0.010</span>
        </div>
         <div class="control-group">
          <label for="wave-angle">Wave Angle</label>
          <input type="range" id="wave-angle" min="0.0" max="6.28" value="0.5" step="0.01">
          <span id="wave-angle-value">0.50</span>
        </div>
        
        <h5>Espuma</h5>
        <div class="control-group">
          <label for="foam-speed">Foam Speed</label>
          <input type="range" id="foam-speed" min="0.0" max="20.0" value="5.0" step="0.5">
          <span id="foam-speed-value">5.0</span>
        </div>
        <div class="control-group">
          <label for="foam-frequency">Foam Frequency</label>
          <input type="range" id="foam-frequency" min="100" max="1000" value="500" step="10">
          <span id="foam-frequency-value">500</span>
        </div>
        <div class="control-group">
          <label for="foam-intensity">Foam Intensity</label>
          <input type="range" id="foam-intensity" min="0.0" max="1.0" value="0.25" step="0.01">
          <span id="foam-intensity-value">0.25</span>
        </div>
      </div>

      <div class="control-section">
        <h4>Iluminação</h4>
        <div class="control-group">
          <label for="sun-height">Sun Height</label>
          <input type="range" id="sun-height" min="0.1" max="5.0" value="2.0" step="0.1">
          <span id="sun-height-value">2.0</span>
        </div>
        <div class="control-group">
          <label for="specular-power">Specular Power</label>
          <input type="range" id="specular-power" min="1" max="256" value="32" step="1">
          <span id="specular-power-value">32</span>
        </div>
        <div class="control-group">
          <label for="specular-intensity">Specular Intensity</label>
          <input type="range" id="specular-intensity" min="0.0" max="2.0" value="0.4" step="0.05">
          <span id="specular-intensity-value">0.40</span>
        </div>
      </div>

      <div class="info-section">
        <p>Botão esquerdo adiciona terreno, botão do meio do mouse tira terreno.</p>
      </div>
    </div>
  </div>

  <script>
    // UI Toggle Functionality
    const controlsToggle = document.getElementById('controls-toggle');
    const controlsPanel = document.getElementById('controls');
    const controlsClose = document.getElementById('controls-close');

    controlsToggle.addEventListener('click', () => {
      controlsPanel.classList.add('controls-visible');
      controlsToggle.style.display = 'none';
    });

    controlsClose.addEventListener('click', () => {
      controlsPanel.classList.remove('controls-visible');
      controlsToggle.style.display = 'flex';
    });

    document.addEventListener('click', (e) => {
      if (!controlsPanel.contains(e.target) && !controlsToggle.contains(e.target) && controlsPanel.classList.contains('controls-visible')) {
        controlsPanel.classList.remove('controls-visible');
        controlsToggle.style.display = 'flex';
      }
    });

    // --- NOVO SCRIPT PARA O SLIDER DINÂMICO ---
    function updateSlider(slider) {
      const min = parseFloat(slider.min);
      const max = parseFloat(slider.max);
      const value = parseFloat(slider.value);
      const percentage = (value - min) / (max - min) * 100;
      slider.style.setProperty('--progress', `${percentage}%`);
    }

    document.querySelectorAll('input[type="range"]').forEach(slider => {
      updateSlider(slider);
      slider.addEventListener('input', () => updateSlider(slider));
    });
  </script>
  <script type="module" src="main.js"></script>
</body>
</html>